schema: '2.0'
stages:
  extract:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/events/awakening/extract.py
    deps:
    - path: data/reference/postcodes.csv
      md5: 3c332ace66b28524c0a710fca1a4b1c0
      size: 76072682
    - path: scripts/metrics/events/awakening/process.py
      md5: d6122c13f010b6f8f251edce90ac6ec5
      size: 2922
    outs:
    - path: working/ballot/
      md5: a9e1101974cbab48d96c5e2b7f246455.dir
      size: 184272
      nfiles: 2
  transform:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/events/awakening/process.py
    deps:
    - path: data/reference/postcodes.csv
      md5: 3c332ace66b28524c0a710fca1a4b1c0
      size: 76072682
    - path: scripts/metrics/events/awakening/process.py
      md5: d6122c13f010b6f8f251edce90ac6ec5
      size: 2922
    - path: working/ballot/
      md5: a9e1101974cbab48d96c5e2b7f246455.dir
      size: 184272
      nfiles: 2
    outs:
    - path: data/metrics/ballot/ballot_entries.csv
      md5: 147095349ae8c64739c89bcd81730d87
      size: 146654
    - path: data/metrics/ballot/ballot_group_entries.csv
      md5: fa9f1301b57033c680cd8f2e3935055c
      size: 1630
  prepare:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/events/awakening/summarize.py
    deps:
    - path: data/metrics/ballot/
      md5: 530aa1292bb1d99472790ab76152c573.dir
      size: 148284
      nfiles: 2
    - path: scripts/metrics/events/awakening/summarize.py
      md5: 2bdd79316db69d7f341fdb1a550bf678
      size: 3662
    outs:
    - path: docs/metrics/events/awakening/_data/by_age.csv
      md5: 5afacb01bd55f3013702110fde2e75ee
      size: 191
    - path: docs/metrics/events/awakening/_data/by_date.csv
      md5: 611c470f2bf147e5f2f29beb38393db8
      size: 2383
    - path: docs/metrics/events/awakening/_data/by_local_authority.csv
      md5: fdc49845936cd7b40004544510f9d44a
      size: 2166
    - path: docs/metrics/events/awakening/_data/by_source.csv
      md5: 15c03a96a51510f751c35086cef7c94d
      size: 295
    - path: docs/metrics/events/awakening/_data/by_ward.csv
      md5: 06e0161c93b24faf1851f20a27d373e4
      size: 3573
    - path: docs/metrics/events/awakening/_data/current.json
      md5: 73becdf2ed3d5ad43179ea94b3f79169
      size: 59
    - path: docs/metrics/events/awakening/_data/local_autority_stats.json
      md5: 98364abe1fed6c930880724f01e743db
      size: 66
  transform_attendees:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/events/awakening/transform_attendees.py
    deps:
    - path: scripts/metrics/events/awakening/transform_attendees.py
      md5: f6be4d5457172357169a6745eafc1009
      size: 669
    - path: working/manual/events/Awakening/
      md5: 405dbfed08139b7161c4f8dabe2103ae.dir
      size: 86002
      nfiles: 1
    outs:
    - path: data/metrics/events/awakening/attendees.csv
      md5: 5c01f5e00fd791cc1b3e2540e4147381
      size: 52939
  prepare_attendees:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/events/awakening/prepare_attendees.py
    deps:
    - path: data/metrics/events/awakening/attendees.csv
      md5: 5c01f5e00fd791cc1b3e2540e4147381
      size: 52939
    - path: scripts/metrics/events/awakening/prepare_attendees.py
      md5: 41831ae76d3c5ccf99d210e5db6ebccc
      size: 831
    outs:
    - path: docs/metrics/events/awakening/_data/attendees.json
      md5: 907851f095dbf58d7ba79973d96de9d6
      size: 31
    - path: docs/metrics/events/awakening/_data/attendees_by_la.csv
      md5: 7cba471cd00ce1025ab297ab396295a9
      size: 1536
    - path: docs/metrics/events/awakening/_data/attendees_by_ward.csv
      md5: 14f73446164b69faf4f636ac44a56775
      size: 4990
