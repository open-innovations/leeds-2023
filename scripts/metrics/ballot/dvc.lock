schema: '2.0'
stages:
  extract:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/ballot/extract.py
    deps:
    - path: data/reference/postcodes.csv
      md5: 3c332ace66b28524c0a710fca1a4b1c0
      size: 76072682
    - path: scripts/metrics/ballot/process.py
      md5: 3d129afbd5414fb3390205597ef14881
      size: 2937
    outs:
    - path: working/ballot/
      md5: 0b822430abdcf4a0cb53a6dd157cbda7.dir
      size: 184272
      nfiles: 2
  transform:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/ballot/process.py
    deps:
    - path: data/reference/postcodes.csv
      md5: 3c332ace66b28524c0a710fca1a4b1c0
      size: 76072682
    - path: scripts/metrics/ballot/process.py
      md5: 3d129afbd5414fb3390205597ef14881
      size: 2937
    - path: working/ballot/
      md5: 0b822430abdcf4a0cb53a6dd157cbda7.dir
      size: 184272
      nfiles: 2
    outs:
    - path: data/metrics/ballot/ballot_entries.csv
      md5: 147095349ae8c64739c89bcd81730d87
      size: 146654
    - path: data/metrics/ballot/ballot_group_entries.csv
      md5: fa9f1301b57033c680cd8f2e3935055c
      size: 1630
  prepare:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/ballot/summarize.py
    deps:
    - path: data/metrics/ballot/
      md5: 530aa1292bb1d99472790ab76152c573.dir
      size: 148284
      nfiles: 2
    - path: scripts/metrics/ballot/summarize.py
      md5: 5e7ccae0e0772c89ee8e25574c3bb98c
      size: 3677
    outs:
    - path: docs/metrics/events/awakening/_data/by_age.csv
      md5: 5afacb01bd55f3013702110fde2e75ee
      size: 191
    - path: docs/metrics/events/awakening/_data/by_date.csv
      md5: 611c470f2bf147e5f2f29beb38393db8
      size: 2383
    - path: docs/metrics/events/awakening/_data/by_local_authority.csv
      md5: fdc49845936cd7b40004544510f9d44a
      size: 2166
    - path: docs/metrics/events/awakening/_data/by_source.csv
      md5: 15c03a96a51510f751c35086cef7c94d
      size: 295
    - path: docs/metrics/events/awakening/_data/by_ward.csv
      md5: 06e0161c93b24faf1851f20a27d373e4
      size: 3573
    - path: docs/metrics/events/awakening/_data/current.json
      md5: 73becdf2ed3d5ad43179ea94b3f79169
      size: 59
    - path: docs/metrics/events/awakening/_data/local_autority_stats.json
      md5: 98364abe1fed6c930880724f01e743db
      size: 66
  transform_attendees:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/ballot/transform_attendees.py
    deps:
    - path: working/manual/events/Awakening/
      md5: 405dbfed08139b7161c4f8dabe2103ae.dir
      size: 86002
      nfiles: 1
    outs:
    - path: data/metrics/events/awakening/attendees.csv
      md5: 5c01f5e00fd791cc1b3e2540e4147381
      size: 52939
