schema: '2.0'
stages:
  extract:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/ballot/extract.py
    deps:
    - path: data/reference/postcodes.csv
      md5: 3c332ace66b28524c0a710fca1a4b1c0
      size: 76072682
    - path: scripts/metrics/ballot/process.py
      md5: 3d129afbd5414fb3390205597ef14881
      size: 2937
    outs:
    - path: working/ballot/
      md5: e8b2d804187f137d4a2daa8551729b98.dir
      size: 184272
      nfiles: 2
  transform:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/ballot/process.py
    deps:
    - path: data/reference/postcodes.csv
      md5: 3c332ace66b28524c0a710fca1a4b1c0
      size: 76072682
    - path: scripts/metrics/ballot/process.py
      md5: 3d129afbd5414fb3390205597ef14881
      size: 2937
    - path: working/ballot/
      md5: e8b2d804187f137d4a2daa8551729b98.dir
      size: 184272
      nfiles: 2
    outs:
    - path: data/metrics/ballot/ballot_entries.csv
      md5: 147095349ae8c64739c89bcd81730d87
      size: 146654
    - path: data/metrics/ballot/ballot_group_entries.csv
      md5: fa9f1301b57033c680cd8f2e3935055c
      size: 1630
  prepare:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/ballot/summarize.py
    deps:
    - path: data/metrics/ballot/
      md5: 530aa1292bb1d99472790ab76152c573.dir
      size: 148284
      nfiles: 2
    - path: scripts/metrics/ballot/summarize.py
      md5: 97558bf53d7e05aa6b29510a706b7d54
      size: 3664
    outs:
    - path: docs/metrics/ballot/_data
      md5: 33b7f041d9a8305c4551eda1923d3611.dir
      size: 8733
      nfiles: 7
  transform_attendees:
    cmd: PYTHONPATH=scripts python3 scripts/metrics/ballot/transform_attendees.py
    deps:
    - path: working/manual/events/Awakening/
      md5: 405dbfed08139b7161c4f8dabe2103ae.dir
      size: 86002
      nfiles: 1
    outs:
    - path: data/metrics/events/awakening/attendees.csv
      md5: 5c01f5e00fd791cc1b3e2540e4147381
      size: 52939
